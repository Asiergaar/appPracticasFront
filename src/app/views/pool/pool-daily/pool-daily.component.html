<div *ngIf="message" class="addmodmessage">
  <p>{{message}}</p>
</div>

<div id="poolDaily" class="lists tarjeta">

  <h1 class="tituloPagina">Daily Pools</h1>

  <button type="submit" routerLink="/PoolsList" mat-raised-button class="pbdbtn">Pools list</button>
  <button type="submit" routerLink="/AddPool" mat-raised-button class="addbtn">Add Pool</button>
  <button type="submit" routerLink="/AddCapital" mat-raised-button class="addbtn">Add Capital</button>

  <mat-form-field class="listFilter poolslist">
    <input (keyup)="applyFilter(target($event).value)" matInput placeholder="Search...">
  </mat-form-field>

  <mat-table matSort [dataSource]="dataSource" class="tablelist">

    <ng-container *ngFor="let col of displayedColumns" matColumnDef="{{col}}">
        <mat-header-cell *matHeaderCellDef mat-sort-header><div *ngIf="col == 'Date'|| col == 'TOTAL' || col == 'Increment' || col == 'Benefit'; else realinc">{{col}}</div></mat-header-cell>
          <ng-template #realinc> <span *ngIf="col == 'NewCapital'; else newcap">{{col.substring(0,3) + ' ' + col.substring(3,col.length)}} </span> </ng-template>
          <ng-template #newcap> <span *ngIf="col == 'RealIncrement'; else show">{{col.substring(0,4) + ' ' + col.substring(4,col.length)}} </span> </ng-template>
          <ng-template #show> <div *ngIf="col == 'Show Pairs' || col == 'Hide Pairs'; else othercols" (click)="submit()">{{col}} </div> </ng-template>
          <ng-template #othercols> <span *ngIf="col.substring(col.length - 4, col.length) == 'null'; else nullcol" class="pairsTable">{{col.substring(0, col.indexOf(":")+1)}}<br>{{ col.substring(col.indexOf(":")+2, col.length - 6)}}</span>
            <ng-template #nullcol> <span class="pairsTable">{{col.substring(0, col.indexOf(":")+1)}}<br>{{ col.substring(col.indexOf(":")+2, col.length)}}</span></ng-template>
          </ng-template>
        <mat-cell *matCellDef="let pool">

          <span *ngIf="col == 'Increment' || col == 'RealIncrement'; else show">{{ dollarUS.format(pool[col]) }}</span>

          <ng-template #show><div *ngIf="col == 'Show Pairs' || col == 'Hide Pairs'; else benefit" (click)="submit()" class="pointer">...</div></ng-template>

          <ng-template #benefit><span *ngIf="col == 'TOTAL'; else date">{{ dollarUS.format(pool[col]) }}</span></ng-template>

          <ng-template #date><span *ngIf="col == 'Date'; else newcaps">{{pool[col]}}</span></ng-template>

          <ng-template #newcaps><span *ngIf="col == 'NewCapital'; else cols">{{ dollarUS.format(pool[col]) }}</span></ng-template>

          <ng-template #cols><span *ngIf="col != 'Benefit'; else neg">{{ dollarUS.format(pool[col]) }}</span></ng-template>

          <ng-template #neg><span *ngIf="pool[col] < 0; else pos" class="negBenefit">{{pool[col] | number: '1.6-6'}}%</span></ng-template>
          <ng-template #pos><span  *ngIf="pool[col] > 0; else pos2" class="posBenefit">{{pool[col] | number: '1.6-6'}}%</span></ng-template>
          <ng-template #pos2><span class="zeroBenefit">{{pool[col] | number: '1.6-6'}}%</span></ng-template>
        </mat-cell>
    </ng-container>


    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>

</mat-table>

<mat-paginator [pageSizeOptions]="[10, 15, 21, max]" showFirstLastButtons class="pagination"></mat-paginator>

</div>

